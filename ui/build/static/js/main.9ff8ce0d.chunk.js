(window.webpackJsonpui=window.webpackJsonpui||[]).push([[0],{11:function(e,t,a){e.exports=a(17)},16:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(9),c=a.n(i),s=(a(16),a(7)),l=a(10),o=a(2),u=a(3),m=a(5),d=a(4),h=a(1),p=a(6),b=function e(t){var a=t.firstName,n=t.lastName,r=t.phoneNum,i=t.email,c=t.isActive,s=t._id,l=t.id;Object(o.a)(this,e),this.firstName=(a||"").trim(),this.lastName=(n||"").trim(),this.isActive=c||!1,this.phoneNum=r||"",this.email=(i||"").trim(),this.id=s||l||""},v=function(e){var t,a,n={},r={firstName:"First Name",lastName:"Last Name"},i=!1;for(t in e)switch(t){case"firstName":case"lastName":(a=e[t]).trim()?/^([a-z ]+)$/i.test(a.trim())?n[t]="":(n[t]="Please Enter Valid "+r[t],i=!0):(n[t]=r[t]+" is required",i=!0);continue;case"phoneNum":(a=parseInt(e[t]))?/^(\d{10})$/.test(a)?n[t]="":(n[t]="Please Enter Valid phone number of 10 digits",i=!0):(n[t]="Phone Number is required",i=!0);continue;case"email":(a=e[t])&&!/^(\w+@[a-z]+\.[a-z]{2,3})$/i.test(a.trim())?(n[t]="Please Enter Valid email Address",i=!0):n[t]="";continue}return{errorObj:n,errorFlag:i}},f={_events:{},on:function(e,t){if("function"!==typeof t)throw new Error("".concat(e," is not a function"));this._events[e]=t},emit:function(e,t,a){if(!this._events[e])throw new Error("".concat(e," is not registered"));this._events[e](t),"function"==typeof a&&a()}},g=Object.create(f);g._events={};var E=Object.create(f);E._events={},console.log(E,g);var O=function(e){var t,a="/"+e.action;return new Promise((function(e,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){4==this.readyState&&200==this.status?(t=r.responseText||"",e(JSON.parse(t))):500==this.status&&n("Server Not Responding")},r.open("GET",a,!0),r.send()}))},C=function(e){return r.a.createElement("div",{className:"mask"},r.a.createElement("div",null,"Loading"),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null))};function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var j=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(h.a)(a)),a.submitUser=a.submitUser.bind(Object(h.a)(a)),a.close=a.close.bind(Object(h.a)(a)),a.cancel=a.cancel.bind(Object(h.a)(a)),a.onEdit=a.onEdit.bind(Object(h.a)(a)),a.state={firstName:"",lastName:"",email:"",phoneNum:"",isActive:!0,id:"",isFromValid:!1,errorFields:{},readMode:!0,loading:!0},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;"new"!=this.props.id?O({action:"contact/"+this.props.id}).then((function(t){var a=new b(t);e.setState((function(e){return N({},a,{loading:!1})})),E.emit("setName",{id:e.props.tabId,name:"Contact: ".concat(a.firstName)})}),(function(t){alert(t),e.setState({loading:!1})})):this.setState({id:"new",readMode:!1,loading:!1})}},{key:"render",value:function(){var e=this.state,t=e.firstName,a=e.lastName,n=e.isActive,i=e.email,c=e.phoneNum,s=e.errorFields,l=e.readMode,o=e.id;return e.loading?r.a.createElement(C,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{name:"userForm",className:"userForm"},r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement("span",null,"First Name ",r.a.createElement("span",{className:"mand"},"*")," :"),l?r.a.createElement("span",null,t):r.a.createElement("input",{type:"text",value:t,name:"firstName",onChange:this.handleChange})),r.a.createElement("div",{className:"error"},s.firstName)),r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement("span",null,"Last Name ",r.a.createElement("span",{className:"mand"},"*")," :"),l?r.a.createElement("span",null,a):r.a.createElement("input",{type:"textx",value:a,name:"lastName",onChange:this.handleChange})),r.a.createElement("div",{className:"error"},s.lastName)),r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement("span",null,"Email : "),l?r.a.createElement("span",null,i):r.a.createElement("input",{type:"email",value:i,name:"email",onChange:this.handleChange})),r.a.createElement("div",{className:"error"},s.email)),r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement("span",null,"Phone Number ",r.a.createElement("span",{className:"mand"},"*")," :"),l?r.a.createElement("span",null,c):r.a.createElement("input",{type:"number",value:c,name:"phoneNum",onChange:this.handleChange})),r.a.createElement("div",{className:"error"},s.phoneNum)),r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement("span",null,"Status : "),l?r.a.createElement("span",null,n?"Active":"In-Active"):r.a.createElement("input",{type:"checkbox",checked:n,name:"isActive",onChange:this.handleChange})))),r.a.createElement("div",{className:"actionButton"},l||"new"==o?r.a.createElement("button",{onClick:this.close},"Close"):r.a.createElement("button",{onClick:this.cancel},"Cancel"),l?r.a.createElement("button",{onClick:this.onEdit},"Edit"):r.a.createElement("button",{type:"submit",onClick:this.submitUser},"Save")))}},{key:"onEdit",value:function(e){this.setState((function(e){return{readMode:!1}}))}},{key:"cancel",value:function(e){this.setState((function(e){return{readMode:!0}}))}},{key:"handleChange",value:function(e,t){var a=e.target.name,n="checkbox"===e.target.type?e.target.checked:e.target.value;this.setState(Object(s.a)({},a,n)),this.setState((function(e){var t=v(Object(s.a)({},a,n)).errorObj;return{errorFields:N({},e.errorFields,{},t)}}))}},{key:"submitUser",value:function(e){var t=this;this.setState((function(e){var a=v(t.state);return{errorFields:a.errorObj,isFromValid:!a.errorFlag}}),(function(){t.state.isFromValid?t.createUser(new b(t.state)):alert("Please fill the mandatory fields to proceed!!")}))}},{key:"close",value:function(e){E.emit("closeTab",{id:this.props.tabId})}},{key:"createUser",value:function(e){var t=this;"new"==this.state.id?function(e){var t,a="/"+e.action;return new Promise((function(n,r){var i=new XMLHttpRequest,c=JSON.stringify(e.data);i.open("POST",a,!0),i.setRequestHeader("Content-type","application/json"),i.onreadystatechange=function(){4==i.readyState&&200==i.status?(t=i.responseText||"",n(JSON.parse(t))):500==this.status&&r("Server Not Responding")},i.send(c)}))}({action:"contact",data:e}).then((function(e){alert("Contact Created"),t.setState((function(t){return{id:e._id}}),t.cancel),g.emit("updateList",void 0,(function(){E.emit("switchTab","tab1"),t.close()}))})).catch((function(e){alert("Error While Creating",e)})):function(e){var t,a="/"+e.action;return new Promise((function(n,r){var i=new XMLHttpRequest,c=JSON.stringify(e.data);i.open("PUT",a,!0),i.setRequestHeader("Content-type","application/json"),i.onreadystatechange=function(){4==i.readyState&&200==i.status?(t=i.responseText||"",n(JSON.parse(t))):500==this.status&&r("Server Not Responding")},i.send(c)}))}({action:"contact/"+this.state.id,data:e}).then((function(){alert("Contact Updated"),t.cancel(),g.emit("updateList")})).catch((function(e){alert("Error While Updating",e)}))}}]),t}(n.Component),k=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).openContact=a.openContact.bind(Object(h.a)(a)),a.deleteContact=a.deleteContact.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.contact,t=e.firstName,a=e.lastName,n=e.email,i=e.phoneNum,c=e.isActive;return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,t," ",a),r.a.createElement("td",null,n),r.a.createElement("td",null,i),r.a.createElement("td",null,c?"Active":"In-Active"),r.a.createElement("td",null,r.a.createElement("button",{onClick:this.openContact},"Open"),r.a.createElement("button",{onClick:this.deleteContact},"Delete"))))}},{key:"openContact",value:function(){this.props.openContact(this.props.contact.id)}},{key:"deleteContact",value:function(){this.props.deleteContact(this.props.contact.id)}}]),t}(n.Component),w=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={rawList:[],contacts:[],pages:[""],currentPage:1,pageSize:5,records:0,filter:"all",loading:!0},g.on("updateList",a.getContactList.bind(Object(h.a)(a))),a.openContact=a.openContact.bind(Object(h.a)(a)),a.deleteContact=a.deleteContact.bind(Object(h.a)(a)),a.onFilter=a.onFilter.bind(Object(h.a)(a)),a.sizeChange=a.sizeChange.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Phone Number"),r.a.createElement("th",null,r.a.createElement("span",null,"Status"),r.a.createElement("select",{className:"filter",value:this.state.filter,onChange:this.onFilter},r.a.createElement("option",{value:"all"},"All"),r.a.createElement("option",{value:"active"},"Active"),r.a.createElement("option",{value:"inactive"},"In-Active"))),r.a.createElement("th",null,"Actions")),this.listContact())),r.a.createElement("div",{className:"paggination"},r.a.createElement("button",{onClick:this.prevPage.bind(this)}," Prev "),r.a.createElement("span",null,this.state.currentPage),r.a.createElement("button",{onClick:this.nextPage.bind(this)},"Next"),r.a.createElement("span",null,"Total Pages : ",this.state.pages.length-1),r.a.createElement("select",{value:this.state.pageSize,onChange:this.sizeChange},r.a.createElement("option",{value:"5"},"5"),r.a.createElement("option",{value:"10"},"10"),r.a.createElement("option",{value:"15"},"15")),r.a.createElement("span",null,"Total contacts : ",this.state.records)))}},{key:"listContact",value:function(){var e=this;return this.state.contacts.length?this.state.contacts.map((function(t){return r.a.createElement(k,{key:t._id,contact:t,openContact:e.openContact,deleteContact:e.deleteContact})})):r.a.createElement("tr",null,r.a.createElement("th",{className:"noData",colSpan:"5"},this.state.loading?r.a.createElement(C,null):"No Contact Found !!"))}},{key:"deleteContact",value:function(e){var t=this;(function(e){var t,a="/"+e.action;return new Promise((function(n,r){var i=new XMLHttpRequest,c=JSON.stringify(e.data);i.open("DELETE",a,!0),i.setRequestHeader("Content-type","application/json"),i.onreadystatechange=function(){4==i.readyState&&200==i.status?(t=i.responseText||"",n(JSON.parse(t))):500==this.status&&r("Server Not Responding")},i.send(c)}))})({action:"contact/"+e}).then((function(e){alert(e.message),t.getContactList()}),(function(e){alert(e)}))}},{key:"openContact",value:function(e){E.emit("addTab",{id:e})}},{key:"getContactList",value:function(){var e=this;O({action:"contact"}).then((function(t){var a=t.sort((function(e,t){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()}));e.setState((function(e){return{rawList:a.map((function(e){return new b(e)})),loading:!1}}),e.setPagging)}),(function(t){alert(t),e.setState({loading:!1})}))}},{key:"componentDidMount",value:function(){this.getContactList()}},{key:"setPagging",value:function(){this.setState((function(e){var t,a,n=e.rawList,r=e.pageSize,i=e.filter,c=[];a=(n=n.filter((function(e){switch(i){case"all":return!0;case"active":return e.isActive;case"inactive":return!e.isActive}}))).length,t=Math.ceil(n.length/r);for(var s=1;s<=t;s++)c[s]=n.splice(0,r);return{pages:c,contacts:c[1]||[],records:a,currentPage:1}}))}},{key:"onFilter",value:function(e){this.setState({filter:e.target.value},this.setPagging)}},{key:"prevPage",value:function(){1!=this.state.currentPage&&this.setState((function(e){var t=e.currentPage-1;return{currentPage:t,contacts:e.pages[t]}}))}},{key:"nextPage",value:function(){var e=this.state.pages.length-1;this.state.currentPage>=e||this.setState((function(e){var t=e.currentPage+1;return{currentPage:t,contacts:e.pages[t]}}))}},{key:"sizeChange",value:function(e){this.setState({pageSize:e.target.value},this.setPagging)}}]),t}(n.Component);function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var P=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={tabList:[{id:"tab1",title:"Contacts",content:w}],activeTab:"tab1"},a.tabCount=1,E.on("addTab",a.addTab.bind(Object(h.a)(a))),E.on("closeTab",a.removeTab.bind(Object(h.a)(a))),E.on("switchTab",a.selectTab.bind(Object(h.a)(a))),E.on("setName",a.setName.bind(Object(h.a)(a))),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state.activeTab;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"tabHead"},this.state.tabList.map((function(a,n){return r.a.createElement("div",{key:a.id,className:t===a.id?"active ":"",onClick:e.selectTab.bind(e,a.id)},r.a.createElement("span",{className:"tab"},r.a.createElement("span",null,a.title),a.close&&r.a.createElement("button",{className:"closeTab",onClick:e.removeTab.bind(e,{id:a.id})},"x")))})),r.a.createElement("button",{onClick:this.addTab.bind(this,{id:"new"})},"Create Contact")),r.a.createElement("div",{className:"tabContainer"},this.state.tabList.map((function(e,a){return r.a.createElement("div",{key:e.id,className:t===e.id?"active":""},r.a.createElement(e.content,Object.assign({},e.props,{tabId:e.id})))}))))}},{key:"selectTab",value:function(e,t){this.setState((function(t){return t.tabList.find((function(t){return t.id===e}))?{activeTab:e}:{}}))}},{key:"addTab",value:function(e){var t=this;this.checkOpen(e.id)||(this.tabCount++,this.setState((function(a){var n="tab"+t.tabCount;return{tabList:[].concat(Object(l.a)(a.tabList),[{id:n,title:"new"===e.id?"New Contact":"Contact",content:j,close:!0,props:e}]),activeTab:n}})))}},{key:"checkOpen",value:function(e){var t=this.state.tabList.find((function(t){return t.props&&t.props.id==e}));if(t)return this.setState((function(){return{activeTab:t.id}})),!0}},{key:"removeTab",value:function(e){var t=e.id;this.tabCount++,this.setState((function(e){var a=0,n=e.tabList.filter((function(e,n){return e.id!==t||(a=n-1,!1)}));return{activeTab:e.tabList[a].id,tabList:n}}))}},{key:"setName",value:function(e){var t=e.id,a=e.name;this.setState((function(e){return{tabList:e.tabList.map((function(e){return e.id==t?function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{title:a}):e}))}}))}}]),t}(n.Component);var T=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(P,null))};c.a.render(r.a.createElement(T,null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.9ff8ce0d.chunk.js.map